(function(){"use strict";var t={5403:function(t,e,i){var s=i(9963),r=i(6252);const o={id:"app"};function n(t,e){const i=(0,r.up)("router-view");return(0,r.wg)(),(0,r.iD)("div",o,[(0,r.Wm)(i)])}var h=i(3744);const a={},l=(0,h.Z)(a,[["render",n]]);var c=l,d=i(2201);const g={class:"home-view"},u=(0,r._)("div",null,null,-1),y={class:"home-view__editor",ref:"parent"};function f(t,e,i,s,o,n){return(0,r.wg)(),(0,r.iD)("div",g,[u,(0,r._)("div",y,null,512)])}class p{constructor(t){const{plugins:e=[],scene:i=null,camera:s=null,$parent:r=document.body}=t;this.canvas=document.createElement("canvas"),this.canvas.width=i.width,this.canvas.height=i.height,this.ctx=this.canvas.getContext("2d"),this.$parent=r,this.plugins=e,this.scene=i,this.camera=s,r.appendChild(this.canvas)}installPlugin(){for(let t=0;t<this.plugins.length;t++){const e=this.plugins[t];e.install(this)}}clear(){const{scene:t,ctx:e}=this,{width:i,height:s,backgroundColor:r}=t;r?(e.fillStyle=r,e.fillRect(0,0,i,s)):e.clearRect(0,0,i,s)}render(){const{scene:t,ctx:e}=this,{meshes:i,width:s,height:r}=t;this.clear();for(let o=0;o<i.length;o++){const t=i[o];t.render({ctx:e})}}}class m{}i(7658);class w{constructor(t){const{width:e=500,height:i=500,backgroundColor:s=null}=t;this.width=e,this.height=i,this.backgroundColor=s,this.meshes=[]}add(t){this.meshes.push(t)}}function x({ctx:t,x:e,y:i,radius:s,radians:r}){t.beginPath(),t.arc(e,i,s,0,r),t.fillStyle="#fff",t.fill(),t.stroke()}function C({ctx:t,x:e,y:i,width:s,height:r}){t.beginPath(),t.fillStyle="#fff",t.strokeRect(e,i,s,r),t.fillRect(e,i,s,r),t.stroke()}class b{constructor(t={}){const{x:e=0,y:i=0,width:s=100,height:r=100,minWidth:o=30,minHeight:n=30,backgroundImage:h=null,radius:a=6,borderWidth:l=2,borderColor:c="#6ccfff",borderRectWidth:d=16,borderRectHeight:g=6,ableScale:u=!0}=t;this.position={x:e,y:i},this.style={width:s,height:r,minWidth:o,minHeight:n,backgroundImage:h,radius:a,borderWidth:l,borderColor:c,borderRectWidth:d,borderRectHeight:g},this.type={focus:!1,hover:!1,ableScale:u}}getCenterPosition(){return{x:this.position.x+this.style.width/2,y:this.position.y+this.style.height/2}}getRightPosition(){return{x:this.position.x+this.style.width,y:this.position.y+this.style.height}}setX(t){this.position.x=t}setY(t){this.position.y=t}scaleX(t){this.style.width*=t}scaleY(t){this.style.height*=t}setWidth(t){this.style.width=t<this.style.minWidth?this.style.minWidth:t}setHeight(t){this.style.height=t<this.style.minHeight?this.style.minHeight:t}transform(t,e){this.transformX(t),this.transformY(e)}transformX(t){this.position.x+=t}transformY(t){this.position.y+=t}move(t,e){this.position.x=t,this.position.y=e}hover(){this.type.hover=!0}unHover(){this.type.hover=!1}focus(){this.type.focus=!0}blur(){this.type.focus=!1}renderBorder({ctx:t}){const{type:e,style:i,position:s}=this,{focus:r,hover:o,ableScale:n}=e;if(!r&&!o)return;const{x:h,y:a}=s,{width:l,height:c,radius:d,borderWidth:g,borderColor:u,borderRectWidth:y,borderRectHeight:f}=i,p=h+l,m=a+c;if(t.beginPath(),t.moveTo(h,a),t.lineTo(p,a),t.lineTo(p,m),t.lineTo(h,m),t.lineTo(h,a),t.strokeStyle=u,t.lineWidth=g,t.stroke(),t.closePath(),!r||!n)return;const w=h+l/2,b=a+c/2;t.strokeStyle="#ccc",t.lineWidth=1,C({ctx:t,x:w-y/2,y:a-f/2,width:y,height:f}),C({ctx:t,x:p-f/2,y:b-y/2,width:f,height:y}),C({ctx:t,x:w-y/2,y:a+c-f/2,width:y,height:f}),C({ctx:t,x:h-f/2,y:b-y/2,width:f,height:y});const X=2*Math.PI;x({ctx:t,x:h,y:a,radius:d,radians:X}),x({ctx:t,x:p,y:a,radius:d,radians:X}),x({ctx:t,x:p,y:m,radius:d,radians:X}),x({ctx:t,x:h,y:m,radius:d,radians:X})}renderBackgroundImage({ctx:t}){const{style:e,position:i}=this,{width:s,height:r,backgroundImage:o}=e;if(!o)return;const{x:n,y:h}=i;t.drawImage(o,n,h,s,r)}render({ctx:t}){this.renderBackgroundImage({ctx:t}),this.renderBorder({ctx:t})}}class X{constructor({width:t,height:e,$parent:i}){const s=new b({width:0,height:0,minWidth:0,minHeight:0,radius:null,borderWidth:1,ableScale:!1}),r=new m,o=new w({width:t,height:e}),n=new p({scene:o,camera:r,$parent:i});s.focus(),o.add(s),n.canvas.style.position="absolute",n.canvas.style.top="0",n.canvas.style.left="0",n.canvas.style.zIndex="1",n.canvas.style.pointerEvents="none",this.mesh=s,this.renderer=n}ready(t,e){this.renderer&&(this.mousedownLeft=t,this.mousedownTop=e,this.mesh.move(t,e),this.renderer.canvas.style.display=null)}update(t,e){const i=t-this.mousedownLeft,s=e-this.mousedownTop;i<0?(this.mesh.setX(this.mousedownLeft+i),this.mesh.setWidth(-i)):this.mesh.setWidth(i),s<0?(this.mesh.setY(this.mousedownTop+s),this.mesh.setHeight(-s)):this.mesh.setHeight(s),this.renderer.render()}hide(){this.renderer&&(this.mesh.setWidth(0),this.mesh.setHeight(0),this.renderer.canvas.style.display="none",this.renderer&&this.renderer.clear())}}const Y=5;class v{constructor({width:t,height:e,$parent:i}){const s=new b({x:0,y:100,width:t,height:.5,minWidth:0,minHeight:0,radius:null,borderWidth:.5,borderColor:"#F56C6C",ableScale:!1}),r=new b({y:0,x:100,width:.5,height:e,minWidth:0,minHeight:0,radius:null,borderWidth:.5,borderColor:"#F56C6C",ableScale:!1}),o=new m,n=new w({width:t,height:e}),h=new p({scene:n,camera:o,$parent:i});n.add(s),n.add(r),h.canvas.style.position="absolute",h.canvas.style.top="0",h.canvas.style.left="0",h.canvas.style.zIndex="1",h.canvas.style.pointerEvents="none",this.meshX=s,this.meshY=r,this.renderer=h}ready(){this.renderer&&(this.renderer.canvas.style.display=null)}updateAdsorptionX({meshY:t,originX:e,originCenterX:i,originRightX:s,targetX:r,targetCenterX:o,targetRightX:n}){let h=null;return Math.abs(i-o)<Y?(t.focus(),t.setX(o),h="center"):Math.abs(i-r)<Y?(t.focus(),t.setX(r),h="center"):Math.abs(i-n)<Y?(t.focus(),t.setX(n),h="center"):Math.abs(e-o)<Y?(t.focus(),t.setX(o),h="left"):Math.abs(e-n)<Y?(t.focus(),t.setX(n),h="left"):Math.abs(e-r)<Y?(t.focus(),t.setX(r),h="left"):Math.abs(s-o)<Y?(t.focus(),t.setX(o),h="right"):Math.abs(s-r)<Y?(t.focus(),t.setX(r),h="right"):Math.abs(s-n)<Y&&(t.focus(),t.setX(n),h="right"),{xType:h}}updateAdsorptionY({meshX:t,originY:e,originCenterY:i,originRightY:s,targetY:r,targetCenterY:o,targetRightY:n}){let h=null;return Math.abs(i-o)<Y?(t.focus(),t.setY(o),h="center"):Math.abs(i-r)<Y?(t.focus(),t.setY(r),h="center"):Math.abs(i-n)<Y?(t.focus(),t.setY(n),h="center"):Math.abs(e-o)<Y?(t.focus(),t.setY(o),h="top"):Math.abs(e-n)<Y?(t.focus(),t.setY(n),h="top"):Math.abs(e-r)<Y?(t.focus(),t.setY(r),h="top"):Math.abs(s-o)<Y?(t.focus(),t.setY(o),h="bottom"):Math.abs(s-r)<Y?(t.focus(),t.setY(r),h="bottom"):Math.abs(s-n)<Y&&(t.focus(),t.setY(n),h="bottom"),{yType:h}}update({originMesh:t,targetMeshes:e}){this.meshX.blur(),this.meshY.blur();let i=null,s=null;for(let r=0;r<e.length;r++){const o=e[r];if(o===t)continue;const{x:n,y:h}=t.position,{x:a,y:l}=t.getCenterPosition(),{x:c,y:d}=t.getRightPosition(),{x:g,y:u}=o.position,{x:y,y:f}=o.getCenterPosition(),{x:p,y:m}=o.getRightPosition(),w=this.updateAdsorptionX({meshY:this.meshY,originX:n,originCenterX:a,originRightX:c,targetX:g,targetCenterX:y,targetRightX:p}),x=this.updateAdsorptionY({meshX:this.meshX,originY:h,originCenterY:l,originRightY:d,targetY:u,targetCenterY:f,targetRightY:m});w.xType&&(i=w.xType),x.yType&&(s=x.yType)}return this.renderer.render(),{xType:i,yType:s,x:i?this.meshY.position.x:null,y:s?this.meshX.position.y:null}}hide(){this.renderer&&(this.renderer.canvas.style.display="none",this.renderer&&this.renderer.clear())}}function M({type:t,targetMeshX:e,originMeshX:i,originMeshWidth:s}){switch(t){case"left":return e-i;case"center":return e-i-s/2;case"right":return e-i-s}}function R({type:t,targetMeshY:e,originMeshY:i,originMeshHeight:s}){switch(t){case"top":return e-i;case"center":return e-i-s/2;case"bottom":return e-i-s}}class B{constructor(){this.clear()}clear(){this.offsetX=0,this.offsetY=0}handleDragMeshTransform({mouse:t,mesh:e,prevMousedownLeft:i,prevMousedownTop:s,onTransform:r}){const{x:o,y:n,xType:h,yType:a}=r(e),l=t.layerX-i,c=t.layerY-s,d=this.offsetX-t.layerX,g=this.offsetY-t.layerY;if(0!==this.offsetX&&Math.abs(d)>Y)e.transformX(-d),this.offsetX=0;else if(h){0===this.offsetX&&(this.offsetX=t.layerX);const i=M({type:h,targetMeshX:o,originMeshX:e.position.x,originMeshWidth:e.style.width});e.transformX(i)}else this.offsetX=0,e.transformX(l);if(0!==this.offsetY&&Math.abs(g)>Y)e.transformY(-g),this.offsetY=0;else if(a){0===this.offsetY&&(this.offsetY=t.layerY);const i=R({type:a,targetMeshY:n,originMeshY:e.position.y,originMeshHeight:e.style.height});e.transformY(i)}else this.offsetY=0,e.transformY(c)}}function T({originX:t,originY:e,targetCenterX:i,targetCenterY:s,radius:r}){return Math.pow(t-i,2)+Math.pow(e-s,2)<r*r}function W({originX:t,originY:e,targetX:i,targetY:s,targetWidth:r,targetHeight:o}){return t>i&&t<i+r&&e>s&&e<s+o}function H(t,e){const{x:i,y:s}=e.position,{x:r,y:o}=e.getRightPosition(),n=t.layerX,h=t.layerY,a=n>i&&n<r&&h>s&&h<o;if(e.type.focus&&e.type.ableScale){const{x:t,y:l}=e.getCenterPosition(),{borderRectWidth:c,borderRectHeight:d,radius:g}=e.style,u=W({originX:n,originY:h,targetX:t-c/2,targetY:s-d/2,targetWidth:c,targetHeight:d}),y=W({originX:n,originY:h,targetX:r-d/2,targetY:l-c/2,targetWidth:d,targetHeight:c}),f=W({originX:n,originY:h,targetX:t-c/2,targetY:o-d/2,targetWidth:c,targetHeight:d}),p=W({originX:n,originY:h,targetX:i-d/2,targetY:l-c/2,targetWidth:d,targetHeight:c}),m=u||y||f||p,w=T({originX:n,originY:h,targetCenterX:i,targetCenterY:s,radius:g}),x=T({originX:n,originY:h,targetCenterX:r,targetCenterY:s,radius:g}),C=T({originX:n,originY:h,targetCenterX:r,targetCenterY:o,radius:g}),b=T({originX:n,originY:h,targetCenterX:i,targetCenterY:o,radius:g}),X=w||x||C||b;return{isCollectContent:a,isCollectBorderRect:m,isCollectTopBorderRect:u,isCollectRightBorderRect:y,isCollectBottomBorderRect:f,isCollectLeftBorderRect:p,isCollectBorderCircular:X,isCollectBorderLeftTopCircular:w,isCollectBorderRightTopCircular:x,isCollectBorderRightBottomCircular:C,isCollectBorderLeftBottomCircular:b}}return{isCollectContent:a,isCollectBorderRect:!1,isCollectTopBorderRect:!1,isCollectRightBorderRect:!1,isCollectBottomBorderRect:!1,isCollectLeftBorderRect:!1,isCollectBorderCircular:!1,isCollectBorderLeftTopCircular:!1,isCollectBorderRightTopCircular:!1,isCollectBorderRightBottomCircular:!1,isCollectBorderLeftBottomCircular:!1}}function k(t,e){const i=[{x:t.position.x,y:t.position.y},{x:t.position.x+t.style.width,y:t.position.y},{x:t.position.x,y:t.position.y+t.style.height},{x:t.position.x+t.style.width,y:t.position.y+t.style.height}];for(let s=0;s<i.length;s++){const t=i[s];if(t.x>e.position.x&&t.x<e.position.x+e.style.width&&t.y>e.position.y&&t.y<e.position.y+e.style.height)return!0}return!1}function P(t,e){for(let i=0;i<e.length;i++){const s=e[i];k(s,t.mesh)?(s.focus(),s.hover()):(s.blur(),s.unHover())}}function S(t,e){let i=null;for(let s=0;s<e.length;s++){const r=e[s],{isCollectContent:o}=H(t,r);r.unHover(),o&&!i&&(i=r)}i?.hover()}function L(t,e){let i=null;for(let s=0;s<e.length;s++){const r=e[s],{isCollectContent:o,isCollectBorderCircular:n,isCollectBorderRect:h}=H(t,r);r.unHover(),r.blur(),!i&&(o||n||h)&&(i=r)}return i?.hover(),i?.focus(),i}function I({mouse:t,mesh:e,onDragMeshMove:i,onDragMeshScale:s,onDragMeshScaleX:r,onDragMeshScaleY:o}){const{isCollectBorderCircular:n,isCollectTopBorderRect:h,isCollectRightBorderRect:a,isCollectBottomBorderRect:l,isCollectLeftBorderRect:c}=H(t,e);n?s(e):c||a?r(e):h||l?o(e):i(e)}function D(t,e,i,s,r){const{x:o,y:n}=t.getCenterPosition(),h=e-s,a=i-r;e<o&&i<n?(t.setX(e),t.setY(i),t.setWidth(t.style.width-h),t.setHeight(t.style.height-a)):e>o&&i<n?(t.setX(e-t.style.width),t.setY(i),t.setWidth(t.style.width+h),t.setHeight(t.style.height-a)):e<o&&i>n?(t.setX(e),t.setY(i-t.style.height),t.setWidth(t.style.width-h),t.setHeight(t.style.height+a)):e>o&&i>n&&(t.setX(e-t.style.width),t.setY(i-t.style.height),t.setWidth(t.style.width+h),t.setHeight(t.style.height+a))}function O(t,e,i){const{x:s}=t.getCenterPosition(),r=e-i;e<s?(t.setX(e),t.setWidth(t.style.width-r)):e>s&&(t.setX(e-t.style.width),t.setWidth(t.style.width+r))}function $(t,e,i){const{y:s}=t.getCenterPosition(),r=e-i;e<s?(t.setY(e),t.setHeight(t.style.height-r)):e>s&&(t.setY(e-t.style.height),t.setHeight(t.style.height+r))}i(541);function E(t,e){for(let i=0;i<t.length;i++){const s=t[i];if(s===e){t.splice(i,1);break}}t.unshift(e)}const j={install(t){const{scene:e,canvas:i,$parent:s}=t,{meshes:r,width:o,height:n}=e;let h,a,l,c,d,g,u,y;function f(){h=!1,a=null,l=null,c=null,d=null,g=null,u=null,y=null}f();const p=new X({width:o,height:n,$parent:s}),m=new v({width:o,height:n,$parent:s}),w=new B;document.addEventListener("mousedown",(e=>{h=!0,p.ready(e.layerX,e.layerY),m.ready(),c=L(e,r),c&&E(r,c),t.render()})),i.addEventListener("mousemove",(e=>{c?g?D(g,e.layerX,e.layerY,a,l):u?O(dragScaleXMeshes,e.layerX,a):y?$(y,e.layerY,l):d?w.handleDragMeshTransform({mouse:e,mesh:d,prevMousedownLeft:a,prevMousedownTop:l,onTransform(t){const{x:e,y:i,xType:s,yType:o}=m.update({originMesh:t,targetMeshes:r});return{x:e,y:i,xType:s,yType:o}}}):I({mouse:e,mesh:c,onDragMeshMove(){d=c},onDragMeshScale(){g=c},onDragMeshScaleX(){u=c},onDragMeshScaleY(){y=c}}):h?(P(p,r),p.update(e.layerX,e.layerY)):S(e,r),a=e.layerX,l=e.layerY,t.render()})),document.addEventListener("mouseup",(()=>{f(),w.clear(),p.hide(),m.hide()}))}},A=[j];var _=i(2262),F={name:"home-view",setup(){const t=(0,_.iH)(null),e=new Image;let i,s,o=0;function n(){const t=new b({x:50+o,y:50+o,backgroundImage:e,width:e.width,height:e.height});i.add(t),o+=2,s.render()}return(0,r.bv)((()=>{e.src="https://st-gdx.dancf.com/gaodingx/4323/configs/system/20210728-095726-adc9.svg",e.onload=()=>{const r=new b({backgroundImage:e,width:e.width,height:e.height}),o=new b({x:50,y:50,backgroundImage:e,width:e.width,height:e.height}),n=new m;i=new w({width:400,height:600,backgroundColor:"white"}),s=new p({plugins:[...A],scene:i,camera:n,$parent:t.value}),i.add(r),i.add(o),s.installPlugin(),s.render()}})),{parent:t,handleAddMesh:n}}};const z=(0,h.Z)(F,[["render",f]]);var Z=z;const q=[{path:"/",name:"home",component:Z}],G=(0,d.p7)({history:(0,d.PO)(""),routes:q});var J=G,K=i(3907),N=(0,K.MT)({state:{},getters:{},mutations:{},actions:{},modules:{}});(0,s.ri)(c).use(N).use(J).mount("#app")}},e={};function i(s){var r=e[s];if(void 0!==r)return r.exports;var o=e[s]={exports:{}};return t[s](o,o.exports,i),o.exports}i.m=t,function(){var t=[];i.O=function(e,s,r,o){if(!s){var n=1/0;for(c=0;c<t.length;c++){s=t[c][0],r=t[c][1],o=t[c][2];for(var h=!0,a=0;a<s.length;a++)(!1&o||n>=o)&&Object.keys(i.O).every((function(t){return i.O[t](s[a])}))?s.splice(a--,1):(h=!1,o<n&&(n=o));if(h){t.splice(c--,1);var l=r();void 0!==l&&(e=l)}}return e}o=o||0;for(var c=t.length;c>0&&t[c-1][2]>o;c--)t[c]=t[c-1];t[c]=[s,r,o]}}(),function(){i.d=function(t,e){for(var s in e)i.o(e,s)&&!i.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:e[s]})}}(),function(){i.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){var t={143:0};i.O.j=function(e){return 0===t[e]};var e=function(e,s){var r,o,n=s[0],h=s[1],a=s[2],l=0;if(n.some((function(e){return 0!==t[e]}))){for(r in h)i.o(h,r)&&(i.m[r]=h[r]);if(a)var c=a(i)}for(e&&e(s);l<n.length;l++)o=n[l],i.o(t,o)&&t[o]&&t[o][0](),t[o]=0;return i.O(c)},s=self["webpackChunkeditor"]=self["webpackChunkeditor"]||[];s.forEach(e.bind(null,0)),s.push=e.bind(null,s.push.bind(s))}();var s=i.O(void 0,[998],(function(){return i(5403)}));s=i.O(s)})();
//# sourceMappingURL=app.b1a6b390.js.map