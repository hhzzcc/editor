(function(){"use strict";var e={4128:function(e,t,n){var A=n(9242),o=n(3396);function l(e,t){const n=(0,o.up)("router-view");return(0,o.wg)(),(0,o.j4)(n)}var a=n(89);const s={},i=(0,a.Z)(s,[["render",l]]);var r=i,u=n(2483);const c={class:"home-view"},d={class:"home-view__header"},g=(0,o._)("img",{class:"home-view__logo",src:"https://st0.dancf.com/static/02/202301130825-f513.png"},null,-1),h={class:"home-view__body"},m={class:"home-view__left"},f={class:"home-view__content"},w={class:"home-view__editor",ref:"parent"},p={class:"home-view__right"},y={key:0};function B(e,t,n,A,l,a){const s=(0,o.up)("ImageBar"),i=(0,o.up)("TextBar"),r=(0,o.up)("GroupBar");return(0,o.wg)(),(0,o.iD)("div",c,[(0,o._)("div",d,[g,(0,o._)("button",{onClick:t[0]||(t[0]=(...e)=>A.handleDownload&&A.handleDownload(...e))},"下载")]),(0,o._)("div",h,[(0,o._)("div",m,[(0,o._)("button",{onClick:t[1]||(t[1]=e=>A.handleAddElement("image"))},"添加图片"),(0,o._)("button",{onClick:t[2]||(t[2]=e=>A.handleAddElement("text"))},"添加文字")]),(0,o._)("div",f,[(0,o._)("div",w,null,512)]),(0,o._)("div",p,[A.editElement?"image"===A.editElement.elementType?((0,o.wg)(),(0,o.j4)(s,{key:1,x:A.editElement.state.x,y:A.editElement.state.y,width:A.editElement.state.width,height:A.editElement.state.height,angle:A.editElement.state.angle,onChangeX:t[3]||(t[3]=e=>A.editElement.setX(e)),onChangeY:t[4]||(t[4]=e=>A.editElement.setY(e)),onChangeWidth:t[5]||(t[5]=e=>A.editElement.setWidth(e)),onChangeHeight:t[6]||(t[6]=e=>A.editElement.setHeight(e)),onChangeAngle:t[7]||(t[7]=e=>A.editElement.setAngle(e))},null,8,["x","y","width","height","angle"])):"text"===A.editElement.elementType?((0,o.wg)(),(0,o.j4)(i,{key:2,x:A.editElement.state.x,y:A.editElement.state.y,angle:A.editElement.state.angle,text:A.editElement.state.text,fontSize:A.editElement.state.fontSize,fontColor:A.editElement.state.fontColor,fontFamily:A.editElement.state.fontFamily,onChangeX:t[8]||(t[8]=e=>A.editElement.setX(e)),onChangeY:t[9]||(t[9]=e=>A.editElement.setY(e)),onChangeAngle:t[10]||(t[10]=e=>A.editElement.setAngle(e)),onChangeText:t[11]||(t[11]=e=>A.editElement.setText(e)),onChangeFontSize:t[12]||(t[12]=e=>A.editElement.setFontSize(e)),onChangeFontFamily:t[13]||(t[13]=e=>A.editElement.setFontFamily(e)),onChangeFontColor:t[14]||(t[14]=e=>A.editElement.setFontColor(e))},null,8,["x","y","angle","text","fontSize","fontColor","fontFamily"])):"group"===A.editElement.elementType?((0,o.wg)(),(0,o.j4)(r,{key:3,x:A.editElement.state.x,y:A.editElement.state.y,angle:A.editElement.state.angle,temporary:A.editElement.state.temporary,onChangeX:t[15]||(t[15]=e=>A.editElement.setX(e)),onChangeY:t[16]||(t[16]=e=>A.editElement.setY(e)),onChangeAngle:t[17]||(t[17]=e=>A.editElement.setAngle(e)),onChangePermanent:t[18]||(t[18]=()=>A.editElement.permanent()),onChangeTemporary:t[19]||(t[19]=()=>A.editElement.temporary())},null,8,["x","y","angle","temporary"])):(0,o.kq)("",!0):((0,o.wg)(),(0,o.iD)("div",y,"画布工具"))])])])}const E={class:"image-bar"};function x(e,t,n,A,l,a){const s=(0,o.up)("Input");return(0,o.wg)(),(0,o.iD)("div",E,[(0,o.Wm)(s,{value:e.x,onChange:t[0]||(t[0]=t=>e.$emit("change-x",+t.target.value))},{addonBefore:(0,o.w5)((()=>[(0,o.Uk)("X")])),_:1},8,["value"]),(0,o.Wm)(s,{value:e.y,onChange:t[1]||(t[1]=t=>e.$emit("change-y",+t.target.value))},{addonBefore:(0,o.w5)((()=>[(0,o.Uk)("Y")])),_:1},8,["value"]),(0,o.Wm)(s,{value:e.width,onChange:t[2]||(t[2]=t=>e.$emit("change-width",+t.target.value))},{addonBefore:(0,o.w5)((()=>[(0,o.Uk)("宽")])),_:1},8,["value"]),(0,o.Wm)(s,{value:e.height,onChange:t[3]||(t[3]=t=>e.$emit("change-height",+t.target.value))},{addonBefore:(0,o.w5)((()=>[(0,o.Uk)("高")])),_:1},8,["value"]),(0,o.Wm)(s,{value:e.angle,onChange:t[4]||(t[4]=t=>e.$emit("change-angle",+t.target.value))},{addonBefore:(0,o.w5)((()=>[(0,o.Uk)("旋转角度")])),_:1},8,["value"])])}var v=n(3271),C=(0,o.aZ)({name:"image-bar",components:{Input:v.ZP},props:{x:{type:[String,Number],default:0},y:{type:[String,Number],default:0},width:{type:[String,Number],default:0},height:{type:[String,Number],default:0},angle:{type:[String,Number],default:0}}});const b=(0,a.Z)(C,[["render",x]]);var M=b;const Q={class:"text-bar"};function Y(e,t,n,A,l,a){const s=(0,o.up)("Input"),i=(0,o.up)("SelectOption"),r=(0,o.up)("Select");return(0,o.wg)(),(0,o.iD)("div",Q,[(0,o._)("div",null,[(0,o.Wm)(s,{value:e.x,onChange:t[0]||(t[0]=t=>e.$emit("change-x",+t.target.value))},{addonBefore:(0,o.w5)((()=>[(0,o.Uk)("X")])),_:1},8,["value"]),(0,o.Wm)(s,{value:e.y,onChange:t[1]||(t[1]=t=>e.$emit("change-y",+t.target.value))},{addonBefore:(0,o.w5)((()=>[(0,o.Uk)("Y")])),_:1},8,["value"]),(0,o.Wm)(s,{value:e.angle,onChange:t[2]||(t[2]=t=>e.$emit("change-angle",+t.target.value))},{addonBefore:(0,o.w5)((()=>[(0,o.Uk)("旋转角度")])),_:1},8,["value"])]),(0,o.Wm)(s,{value:e.text,onChange:t[3]||(t[3]=t=>e.$emit("change-text",t.target.value))},{addonBefore:(0,o.w5)((()=>[(0,o.Uk)("内容")])),_:1},8,["value"]),(0,o.Wm)(r,{value:e.fontFamily,onChange:t[4]||(t[4]=t=>e.$emit("change-font-family",t))},{addonBefore:(0,o.w5)((()=>[(0,o.Uk)("X")])),default:(0,o.w5)((()=>[(0,o.Wm)(i,{value:"serif"},{default:(0,o.w5)((()=>[(0,o.Uk)("serif")])),_:1}),(0,o.Wm)(i,{value:"fangsong"},{default:(0,o.w5)((()=>[(0,o.Uk)("仿宋")])),_:1})])),_:1},8,["value"]),(0,o.Wm)(r,{value:e.fontSize,onChange:t[5]||(t[5]=t=>e.$emit("change-font-size",t))},{default:(0,o.w5)((()=>[(0,o.Wm)(i,{value:14},{default:(0,o.w5)((()=>[(0,o.Uk)("14px")])),_:1}),(0,o.Wm)(i,{value:20},{default:(0,o.w5)((()=>[(0,o.Uk)("20px")])),_:1})])),_:1},8,["value"]),(0,o.Wm)(s,{type:"color",value:e.fontColor,onChange:t[6]||(t[6]=t=>e.$emit("change-font-color",t.target.value))},null,8,["value"])])}var S=n(4640),I=(0,o.aZ)({name:"text-bar",components:{Select:S.ZP,SelectOption:S.$m,Input:v.ZP},props:{x:{type:[String,Number],default:0},y:{type:[String,Number],default:0},width:{type:[String,Number],default:0},height:{type:[String,Number],default:0},angle:{type:[String,Number],default:0},text:{type:String,default:""},fontFamily:{type:String,default:""},fontSize:{type:[String,Number],default:0},fontColor:{type:String,default:""}}});const k=(0,a.Z)(I,[["render",Y]]);var F=k;const R={class:"image-bar"};function D(e,t,n,A,l,a){const s=(0,o.up)("Input"),i=(0,o.up)("Button");return(0,o.wg)(),(0,o.iD)("div",R,[(0,o.Wm)(s,{value:e.x,onChange:t[0]||(t[0]=t=>e.$emit("change-x",+t.target.value))},{addonBefore:(0,o.w5)((()=>[(0,o.Uk)("X")])),_:1},8,["value"]),(0,o.Wm)(s,{value:e.y,onChange:t[1]||(t[1]=t=>e.$emit("change-y",+t.target.value))},{addonBefore:(0,o.w5)((()=>[(0,o.Uk)("Y")])),_:1},8,["value"]),(0,o.Wm)(s,{value:e.angle,onChange:t[2]||(t[2]=t=>e.$emit("change-angle",+t.target.value))},{addonBefore:(0,o.w5)((()=>[(0,o.Uk)("旋转角度")])),_:1},8,["value"]),e.temporary?((0,o.wg)(),(0,o.j4)(i,{key:0,onClick:t[3]||(t[3]=t=>e.$emit("change-permanent"))},{default:(0,o.w5)((()=>[(0,o.Uk)("成组")])),_:1})):((0,o.wg)(),(0,o.j4)(i,{key:1,onClick:t[4]||(t[4]=t=>e.$emit("change-temporary"))},{default:(0,o.w5)((()=>[(0,o.Uk)("解组")])),_:1}))])}var X=n(2514),U=(0,o.aZ)({name:"group-bar",components:{Input:v.ZP,Button:X.Z},props:{x:{type:[String,Number],default:0},y:{type:[String,Number],default:0},width:{type:[String,Number],default:0},height:{type:[String,Number],default:0},angle:{type:[String,Number],default:0},temporary:{type:Boolean,default:!1}}});const Z=(0,a.Z)(U,[["render",D]]);var T=Z,G=n(4870);class H{constructor(e={}){const{x:t=0,y:n=0,width:A=100,height:o=100,angle:l=0,hover:a=!1,focus:s=!1,operable:i=!0,zIndex:r=null}=e;this.state={x:t,y:n,width:A,height:o,hover:a,focus:s,operable:i,zIndex:r,angle:l}}getPosition(){return{x:this.state.x,y:this.state.y}}getCenterPosition(){const{x:e,y:t}=this.getPosition();return{x:e+this.state.width/2,y:t+this.state.height/2}}getRightPosition(){const{x:e,y:t}=this.getPosition();return{x:e+this.state.width,y:t+this.state.height}}setPosition(e,t){this.setX(e),this.setY(t)}transform(e,t){this.transformX(e),this.transformY(t)}transformX(e){this.setX(this.state.x+e)}transformY(e){this.setY(this.state.y+e)}setX(e){this.state.x=e}setY(e){this.state.y=e}setAngle(e){this.state.angle=e}scale(e,t){this.scaleX(e),this.scaleY(t)}scaleX(e){this.setWidth(this.state.width*e)}scaleY(e){this.setHeight(this.state.height*e)}setWidth(e){this.state.width=e}setHeight(e){this.state.height=e}setZIndex(e){this.state.zIndex=e}hover(){this.state.hover=!0}unHover(){this.state.hover=!1}focus(){this.state.focus=!0}blur(){this.state.focus=!1}operable(){this.state.operable=!0}inoperable(){this.state.operable=!1}}class W extends H{constructor({imgSrc:e,...t}){super(t),this.elementType="image",this.setImgSrc(e)}async setImgSrc(e){this.state.imgSrc=e}}class N extends H{constructor({text:e,fontSize:t=24,fontColor:n="#000000",fontFamily:A="fangsong",...o}){super(o),this.elementType="text",this.target={el:null,contentEl:null,textEl:null},this.setFontSize(t),this.setFontColor(n),this.setFontFamily(A),this.setText(e)}setTarget(e){this.target=e}setFontColor(e){this.state.fontColor=e}setFontFamily(e){this.state.fontFamily=e}setFontSize(e){this.state.fontSize=e}setText(e){this.state.text=e}startEdit(){this.state.edit=!0}endEdit(){this.state.edit=!1}updateWidth(){this.target.textEl&&this.setWidth(this.target.textEl.offsetWidth)}updateHeight(){this.target.textEl&&this.setHeight(this.target.textEl.offsetHeight)}updateSize(){this.updateWidth(),this.updateHeight()}}function j(e){const t=e.offsetWidth,n=e.offsetHeight,A=new Image;A.width=t,A.height=n,A.onload=function(){const e=document.createElement("canvas"),A=e.getContext("2d");e.width=t,e.height=n,A.clearRect(0,0,t,n),A.drawImage(this,0,0,t,n);const o="image/png",l=e.toDataURL(o),a=document.createElement("a");a.download="下载.png",a.href=l,a.dataset.downloadurl=[o,a.download,a.href].join(":"),a.click()};let o="";const l=document.querySelectorAll("style");for(let a=0;a<l.length-1;a++){const e=l[a];o+=e.innerHTML}A.src=`data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg"><foreignObject width="${t}" height="${n}"><body xmlns="http://www.w3.org/1999/xhtml">\n            ${(new XMLSerializer).serializeToString(e)}\n            <style>${o}</style></body></foreignObject></svg>`.replace(/\n/g,"").replace(/\t/g,"").replace(/#/g,"%23")}n(7658);const P=5,O=10;class z{constructor({width:e,height:t,$parent:n}){const A=document.createElement("canvas");A.width=e,A.height=t,A.style.position="absolute",A.style.top="0",A.style.left="0",A.style.zIndex="9",A.style.pointerEvents="none",n.appendChild(A),this.canvas=A,this.ctx=A.getContext("2d")}drawXLine(e){const{ctx:t,canvas:n}=this;t.beginPath(),t.moveTo(0,e),t.lineTo(n.width,e),t.strokeStyle="#F56C6C",t.lineWidth=1,t.stroke(),t.closePath()}drawYLine(e){const{ctx:t,canvas:n}=this;t.beginPath(),t.moveTo(e,0),t.lineTo(e,n.height),t.strokeStyle="#F56C6C",t.lineWidth=1,t.stroke(),t.closePath()}clear(){const{ctx:e,canvas:t}=this;e.clearRect(0,0,t.width,t.height)}updateAdsorptionX({originX:e,originCenterX:t,originRightX:n,targetX:A,targetCenterX:o,targetRightX:l}){return Math.abs(t-o)<P?{type:"center",value:o}:Math.abs(t-A)<P?{type:"center",value:A}:Math.abs(t-l)<P?{type:"center",value:l}:Math.abs(e-o)<P?{type:"left",value:o}:Math.abs(e-l)<P?{type:"left",value:l}:Math.abs(e-A)<P?{type:"left",value:A}:Math.abs(n-o)<P?{type:"right",value:o}:Math.abs(n-A)<P?{type:"right",value:A}:Math.abs(n-l)<P?{type:"right",value:l}:null}updateAdsorptionY({originY:e,originCenterY:t,originRightY:n,targetY:A,targetCenterY:o,targetRightY:l}){return Math.abs(t-o)<P?{type:"center",value:o}:Math.abs(t-A)<P?{type:"center",value:A}:Math.abs(t-l)<P?{type:"center",value:l}:Math.abs(e-o)<P?{type:"top",value:o}:Math.abs(e-l)<P?{type:"top",value:l}:Math.abs(e-A)<P?{type:"top",value:A}:Math.abs(n-o)<P?{type:"bottom",value:o}:Math.abs(n-A)<P?{type:"bottom",value:A}:Math.abs(n-l)<P?{type:"bottom",value:l}:null}update({originElement:e,targetElements:t}){let n=null,A=null;for(let o=0;o<t.length;o++){const l=t[o];if(l===e)continue;const{x:a,y:s}=e.getPosition(),{x:i,y:r}=e.getCenterPosition(),{x:u,y:c}=e.getRightPosition(),{x:d,y:g}=l.getPosition(),{x:h,y:m}=l.getCenterPosition(),{x:f,y:w}=l.getRightPosition(),p=this.updateAdsorptionX({originX:a,originCenterX:i,originRightX:u,targetX:d,targetCenterX:h,targetRightX:f}),y=this.updateAdsorptionY({originY:s,originCenterY:r,originRightY:c,targetY:g,targetCenterY:m,targetRightY:w});p&&(n=p),y&&(A=y)}return this.clear(),n&&this.drawYLine(n.value),A&&this.drawXLine(A.value),{xType:n?n.type:null,yType:A?A.type:null,x:n?n.value:null,y:A?A.value:null}}}function K({x1:e,y1:t,width1:n,height1:A,x2:o,y2:l,width2:a,height2:s}){const i=[{x:e,y:t},{x:e+n,y:t},{x:e,y:t+A},{x:e+n,y:t+A}];for(let r=0;r<i.length;r++){const e=i[r];if(e.x>o&&e.x<o+a&&e.y>l&&e.y<l+s)return!0}return!1}class V{constructor({width:e,height:t,$parent:n}){const A=document.createElement("canvas");A.width=e,A.height=t,A.style.position="absolute",A.style.top="0",A.style.left="0",A.style.zIndex="9",A.style.pointerEvents="none",n.appendChild(A),this.canvas=A,this.ctx=A.getContext("2d")}ready({originX:e,originY:t}){this.originX=e,this.originY=t,this.collectElements=[]}update({x:e,y:t,targetElements:n}){this.clear();const{ctx:A,originX:o,originY:l}=this,a=e-o,s=t-l;let i,r,u,c;a<0?(i=e,u=-a):(i=o,u=a),s<0?(r=t,c=-s):(r=l,c=s),A.strokeStyle="blue",A.lineWidth=1,A.beginPath(),A.strokeRect(i,r,u,c),A.stroke();const d=[];for(let g=0;g<n.length;g++){const e=n[g];K({x1:e.state.x,y1:e.state.y,width1:e.state.width,height1:e.state.height,x2:i,y2:r,width2:u,height2:c})?(e.inoperable(),e.focus(),d.push(e)):(e.operable(),e.blur())}this.collectElements=d}getCollectElements(){return this.collectElements}clear(){const{ctx:e,canvas:t}=this;e.clearRect(0,0,t.width,t.height)}}function q({type:e,targetElementX:t,originElementX:n,originElementWidth:A}){switch(e){case"left":return t-n;case"center":return t-n-A/2;case"right":return t-n-A}}function L({type:e,targetElementY:t,originElementY:n,originElementHeight:A}){switch(e){case"top":return t-n;case"center":return t-n-A/2;case"bottom":return t-n-A}}class J{constructor(){this.clear()}clear(){this.offsetX=0,this.offsetY=0}handleDragElementTransform({mouse:e,element:t,onTransform:n}){const{x:A,y:o,xType:l,yType:a}=n(t),s=e.movementX,i=e.movementY,r=e.x-this.offsetX,u=e.y-this.offsetY;if(0!==this.offsetX&&Math.abs(r)>O)t.transformX(r),this.offsetX=0;else if(l){const n=q({type:l,targetElementX:A,originElementX:t.state.x,originElementWidth:t.state.width});t.transformX(n),0===this.offsetX&&(this.offsetX=e.x)}else t.transformX(s),this.offsetX=0;if(0!==this.offsetY&&Math.abs(u)>O)t.transformY(u),this.offsetY=0;else if(a){const n=L({type:a,targetElementY:o,originElementY:t.state.y,originElementHeight:t.state.height});t.transformY(n),0===this.offsetY&&(this.offsetY=e.y)}else t.transformY(i),this.offsetY=0}}function _(e,t,n){const{x:A}=e.getCenterPosition(),{width:o}=e.state,{x:l}=t,a=void 0===n?t.movementX:n;l<A?(e.setX(l),e.setWidth(o-a)):l>A&&e.setWidth(o+a),"text"===e.elementType&&e.updateHeight()}function $(e,t,n){const{y:A}=e.getCenterPosition(),{height:o}=e.state,{y:l}=t,a=void 0===n?t.movementY:n;l<A?(e.setY(l),e.setHeight(o-a)):l>A&&e.setHeight(o+a)}function ee(e,t,n){const{x:A,y:o}=e.getCenterPosition(),{width:l,height:a}=e.state,{x:s,y:i}=t,r=l/a;if(s<A&&i<o){const t=l-n,A=t/r;e.setWidth(t),e.setHeight(A),e.transformX(l-t),e.transformY(a-A)}else if(s<A&&i>o){const t=l-n,A=t/r;e.setWidth(t),e.setHeight(A),e.transformX(l-t)}else if(s>A&&i<o){const t=l+n,A=t/r;e.setWidth(t),e.setHeight(A),e.transformY(a-A)}else if(s>A&&i>o){const t=l+n,A=t/r;e.setWidth(t),e.setHeight(A)}}function te(e,t,n){const{width:A,height:o,fontSize:l}=e.state,{x:a}=e.getCenterPosition(),{x:s}=t,i=n/l,r=+(o/i).toFixed(2);if(e.setFontSize(r),e.scaleX(r/l),s<a){const t=A-e.state.width;e.transformX(t)}}function ne(e,t){const{movementY:n,movementX:A}=t;if("text"===e.elementType){const{height:A}=e.state;$(e,t,n/1.5),te(e,t,A)}else ee(e,t,A)}function Ae({x:e,y:t}){const n=Math.sqrt(e*e+t*t);return{x:e/n,y:t/n}}function oe(e,t){const{x:n,y:A}=e.getCenterPosition(),{x:o,y:l}=t,a={x:0,y:1},s=Ae({x:o-n,y:l-A}),i=o<n?1:-1;e.setAngle(Math.ceil(i*(180*Math.acos(a.x*s.x+a.y*s.y))/Math.PI))}function le(e){let t=null,n=null,A=null,o=null;for(let l=0;l<e.length;l++){const a=e[l],{x:s,y:i,width:r,height:u}=a.state;t=null===t?i:Math.min(t,i),n=null===n?s+r:Math.max(n,s+r),A=null===A?i+u:Math.max(A,i+u),o=null===o?s:Math.min(o,s)}return{x:o,y:t,width:n-o,height:A-t}}function ae(){return new Promise((e=>{const t=document.createElement("input");t.type="file",t.click(),t.onchange=()=>{const n=t.files[0],A=new FileReader;A.onload=()=>{const t=new Image;t.src=A.result,t.onload=()=>{e(t)}},A.readAsDataURL(n)}}))}class se extends H{constructor({children:e,...t}){super(t),this.elementType="group",this.add(e)}add(e){this.state.children||(this.state.children=[]),this.state.children.push(...e)}temporary(){this.state.temporary=!0}permanent(){this.state.temporary=!1}}var ie=n(7139);function re(e,t,n,A,l,a){const s=(0,o.up)("ImageElementComponent"),i=(0,o.up)("TextElementComponent"),r=(0,o.up)("GroupElementComponent");return(0,o.wg)(),(0,o.iD)("div",{class:(0,ie.C_)(e.bem())},[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.elements,((t,n)=>((0,o.wg)(),(0,o.iD)(o.HY,{key:n},["image"===t.elementType?((0,o.wg)(),(0,o.j4)(s,(0,o.dG)({key:0},t.state,{onMousedownScaleXy:n=>e.handleMousedownScaleXY(t),onMousedownScaleX:n=>e.handleMousedownScaleX(t),onMousedownScaleY:n=>e.handleMousedownScaleY(t),onMousedownRotate:n=>e.handleMousedownRotate(t),onMousedownContent:n=>e.handleMousedownContent(t),onDbClickContent:n=>e.handleDbClickContent(t),onMouseenterContent:n=>e.handleMouseenterContent(t),onMouseleaveContent:n=>e.handleMouseleaveContent(t),onClickContent:n=>e.handleClickContent(t)}),null,16,["onMousedownScaleXy","onMousedownScaleX","onMousedownScaleY","onMousedownRotate","onMousedownContent","onDbClickContent","onMouseenterContent","onMouseleaveContent","onClickContent"])):"text"===t.elementType?((0,o.wg)(),(0,o.j4)(i,(0,o.dG)({key:1},t.state,{onChangeText:n=>e.handleChangeText(n,t),onMousedownScaleXy:n=>e.handleMousedownScaleXY(t),onMousedownScaleX:n=>e.handleMousedownScaleX(t),onMousedownRotate:n=>e.handleMousedownRotate(t),onMousedownContent:n=>e.handleMousedownContent(t),onMouseenterContent:n=>e.handleMouseenterContent(t),onMouseleaveContent:n=>e.handleMouseleaveContent(t),onClickContent:n=>e.handleClickTextElementContent(t),onMounted:n=>e.handleTextElementMounted(t,n)}),null,16,["onChangeText","onMousedownScaleXy","onMousedownScaleX","onMousedownRotate","onMousedownContent","onMouseenterContent","onMouseleaveContent","onClickContent","onMounted"])):"group"===t.elementType?((0,o.wg)(),(0,o.j4)(r,(0,o.dG)({key:2},t.state,{onMousedownScaleXy:n=>e.handleMousedownScaleXY(t),onMousedownRotate:n=>e.handleMousedownRotate(t),onMousedownContent:n=>e.handleMousedownContent(t),onMouseenterContent:n=>e.handleMouseenterContent(t),onMouseleaveContent:n=>e.handleMouseleaveContent(t),onClickContent:n=>e.handleClickContent(t)}),null,16,["onMousedownScaleXy","onMousedownRotate","onMousedownContent","onMouseenterContent","onMouseleaveContent","onClickContent"])):(0,o.kq)("",!0)],64)))),128))],2)}function ue(e,t){return t?"string"===typeof t?` ${e}--${t}`:Array.isArray(t)?t.reduce(((t,n)=>t+ue(e,n)),""):Object.keys(t).reduce(((n,A)=>n+(t[A]?ue(e,A):"")),""):""}function ce(e){return(t,n)=>(t&&"string"!==typeof t&&(n=t,t=""),t=t?`${e}__${t}`:e,`${t}${ue(t,n)}`)}function de(e){const t=e;return[t,ce(t)]}const ge=["src"];function he(e,t,n,A,l,a){const s=(0,o.up)("Border");return(0,o.wg)(),(0,o.j4)(s,{class:(0,ie.C_)(e.bem()),visibleBox:e.visibleBox,visibleBoxScale:e.visibleBoxScale,style:(0,ie.j5)(e.style),onMousedownScaleXy:t[5]||(t[5]=t=>e.$emit("mousedown-scale-xy")),onMousedownScaleX:t[6]||(t[6]=t=>e.$emit("mousedown-scale-x")),onMousedownScaleY:t[7]||(t[7]=t=>e.$emit("mousedown-scale-y")),onMousedownRotate:t[8]||(t[8]=t=>e.$emit("mousedown-scale-rotate"))},{default:(0,o.w5)((()=>[(0,o._)("div",{class:(0,ie.C_)(e.bem("content")),onMousedown:t[0]||(t[0]=t=>e.$emit("mousedown-content")),onMouseenter:t[1]||(t[1]=t=>e.$emit("mouseenter-content")),onMouseleave:t[2]||(t[2]=t=>e.$emit("mouseleave-content")),onClick:t[3]||(t[3]=t=>e.$emit("click-content")),onDblclick:t[4]||(t[4]=t=>e.$emit("db-click-content"))},[e.imgSrc?((0,o.wg)(),(0,o.iD)("img",{key:0,src:e.imgSrc},null,8,ge)):(0,o.kq)("",!0)],34)])),_:1},8,["class","visibleBox","visibleBoxScale","style"])}function me(e,t,n,A,l,a){const s=(0,o.up)("RedoOutlined");return(0,o.wg)(),(0,o.iD)("div",{class:(0,ie.C_)(e.bem({"visible-box":e.visibleBox}))},[(0,o.WI)(e.$slots,"default"),e.visibleBox&&e.visibleBoxScale?((0,o.wg)(),(0,o.iD)(o.HY,{key:0},[(0,o._)("div",{class:(0,ie.C_)(e.bem("circular","left-top")),onMousedown:t[0]||(t[0]=t=>e.$emit("mousedown-scale-xy"))},null,34),(0,o._)("div",{class:(0,ie.C_)(e.bem("circular","right-top")),onMousedown:t[1]||(t[1]=t=>e.$emit("mousedown-scale-xy"))},null,34),(0,o._)("div",{class:(0,ie.C_)(e.bem("circular","right-bottom")),onMousedown:t[2]||(t[2]=t=>e.$emit("mousedown-scale-xy"))},null,34),(0,o._)("div",{class:(0,ie.C_)(e.bem("circular","left-bottom")),onMousedown:t[3]||(t[3]=t=>e.$emit("mousedown-scale-xy"))},null,34),e.visibleBoxScaleY?((0,o.wg)(),(0,o.iD)(o.HY,{key:0},[(0,o._)("div",{class:(0,ie.C_)(e.bem("rect","top")),onMousedown:t[4]||(t[4]=t=>e.$emit("mousedown-scale-y"))},null,34),(0,o._)("div",{class:(0,ie.C_)(e.bem("rect","bottom")),onMousedown:t[5]||(t[5]=t=>e.$emit("mousedown-scale-y"))},null,34)],64)):(0,o.kq)("",!0),e.visibleBoxScaleX?((0,o.wg)(),(0,o.iD)(o.HY,{key:1},[(0,o._)("div",{class:(0,ie.C_)(e.bem("rect","right")),onMousedown:t[6]||(t[6]=t=>e.$emit("mousedown-scale-x"))},null,34),(0,o._)("div",{class:(0,ie.C_)(e.bem("rect","left")),onMousedown:t[7]||(t[7]=t=>e.$emit("mousedown-scale-x"))},null,34)],64)):(0,o.kq)("",!0),(0,o.Wm)(s,{class:(0,ie.C_)(e.bem("rotate")),onMousedown:t[8]||(t[8]=t=>e.$emit("mousedown-rotate"))},null,8,["class"])],64)):(0,o.kq)("",!0)],2)}var fe=n(2876);const[we,pe]=de("border");var ye=(0,o.aZ)({name:we,components:{RedoOutlined:fe.Z},props:{visibleBox:{type:Boolean,default:!1},visibleBoxScale:{type:Boolean,default:!1},visibleBoxScaleY:{type:Boolean,default:!0},visibleBoxScaleX:{type:Boolean,default:!0}},setup(){return{bem:pe}}});const Be=(0,a.Z)(ye,[["render",me]]);var Ee=Be;const[xe,ve]=de("image-element");var Ce=(0,o.aZ)({name:xe,components:{Border:Ee},props:{width:{type:Number,default:0},height:{type:Number,default:0},x:{type:Number,default:0},y:{type:Number,default:0},angle:{type:Number,default:0},zIndex:{type:Number,default:null},imgSrc:{type:String,default:""},hover:{type:Boolean,default:!1},focus:{type:Boolean,default:!1},operable:{type:Boolean,default:!0}},setup(e){const t=(0,o.Fl)((()=>e.hover||e.focus)),n=(0,o.Fl)((()=>e.focus&&e.operable)),A=(0,o.Fl)((()=>({width:e.width+"px",height:e.height+"px",transform:`translate(${e.x}px, ${e.y}px) rotateZ(${e.angle}deg)`,zIndex:e.zIndex})));return{visibleBox:t,visibleBoxScale:n,style:A,bem:ve}}});const be=(0,a.Z)(Ce,[["render",he]]);var Me=be;function Qe(e,t,n,A,l,a){const s=(0,o.up)("ImageElement"),i=(0,o.up)("TextElement"),r=(0,o.up)("GroupElement",!0),u=(0,o.up)("Border");return(0,o.wg)(),(0,o.j4)(u,{class:(0,ie.C_)(e.bem()),visibleBox:e.visibleBox,visibleBoxScale:e.visibleBoxScale,visibleBoxScaleX:!1,visibleBoxScaleY:!1,style:(0,ie.j5)(e.style),onMousedownScaleXy:t[4]||(t[4]=t=>e.$emit("mousedown-scale-xy")),onMousedownRotate:t[5]||(t[5]=t=>e.$emit("mousedown-scale-rotate"))},{default:(0,o.w5)((()=>[(0,o._)("div",{class:(0,ie.C_)(e.bem("content")),onMousedown:t[0]||(t[0]=t=>e.$emit("mousedown-content")),onMouseenter:t[1]||(t[1]=t=>e.$emit("mouseenter-content")),onMouseleave:t[2]||(t[2]=t=>e.$emit("mouseleave-content")),onClick:t[3]||(t[3]=t=>e.$emit("click-content"))},[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.children,((e,t)=>((0,o.wg)(),(0,o.iD)(o.HY,{key:t},["image"===e.elementType?((0,o.wg)(),(0,o.j4)(s,(0,ie.vs)((0,o.dG)({key:0},e.state)),null,16)):"text"===e.elementType?((0,o.wg)(),(0,o.j4)(i,(0,ie.vs)((0,o.dG)({key:1},e.state)),null,16)):"group"===e.elementType?((0,o.wg)(),(0,o.j4)(r,(0,ie.vs)((0,o.dG)({key:2},e.state)),null,16)):(0,o.kq)("",!0)],64)))),128))],34)])),_:1},8,["class","visibleBox","visibleBoxScale","style"])}const Ye=["contenteditable"];function Se(e,t,n,A,l,a){const s=(0,o.up)("Border");return(0,o.wg)(),(0,o.j4)(s,{ref:"el",class:(0,ie.C_)(e.bem()),visibleBox:e.visibleBox,visibleBoxScale:e.visibleBoxScale,visibleBoxScaleY:!1,style:(0,ie.j5)(e.style),onMousedownScaleXy:t[5]||(t[5]=t=>e.$emit("mousedown-scale-xy")),onMousedownScaleX:t[6]||(t[6]=t=>e.$emit("mousedown-scale-x")),onMousedownRotate:t[7]||(t[7]=t=>e.$emit("mousedown-scale-rotate"))},{default:(0,o.w5)((()=>[(0,o._)("div",{ref:"contentEl",class:(0,ie.C_)(e.bem("content")),onMousedown:t[1]||(t[1]=t=>e.$emit("mousedown-content")),onMouseenter:t[2]||(t[2]=t=>e.$emit("mouseenter-content")),onMouseleave:t[3]||(t[3]=t=>e.$emit("mouseleave-content")),onClick:t[4]||(t[4]=t=>e.$emit("click-content"))},[(0,o._)("div",{ref:"textEl",class:(0,ie.C_)(e.bem("text",{edit:e.edit})),contenteditable:e.edit,style:(0,ie.j5)(e.textStyle),onInput:t[0]||(t[0]=t=>e.$emit("change-text",t.target.textContent))},(0,ie.zw)(e.text),47,Ye)],34)])),_:1},8,["class","visibleBox","visibleBoxScale","style"])}const[Ie,ke]=de("text-element");var Fe=(0,o.aZ)({name:Ie,components:{Border:Ee},props:{width:{type:Number,default:0},height:{type:Number,default:0},x:{type:Number,default:0},y:{type:Number,default:0},zIndex:{type:Number,default:null},angle:{type:Number,default:0},fontSize:{type:Number,default:null},fontColor:{type:String,default:null},fontFamily:{type:String,default:null},text:{type:String,default:""},edit:{type:Boolean,default:!1},hover:{type:Boolean,default:!1},focus:{type:Boolean,default:!1},operable:{type:Boolean,default:!0}},setup(e,{emit:t}){const n=(0,o.Fl)((()=>e.hover||e.focus)),A=(0,o.Fl)((()=>e.focus&&e.operable)),l=(0,G.iH)(null),a=(0,G.iH)(null),s=(0,G.iH)(null),i=(0,o.Fl)((()=>({width:e.width+"px",height:e.height+"px",transform:`translate(${e.x}px, ${e.y}px) rotateZ(${e.angle}deg)`,zIndex:e.zIndex}))),r=(0,o.Fl)((()=>({fontSize:e.fontSize+"px",fontFamily:e.fontFamily,lineHeight:e.fontSize+"px",color:e.fontColor})));return(0,o.bv)((()=>{t("mounted",{el:l.value,textEl:s.value,contentEl:a.value})})),{visibleBox:n,visibleBoxScale:A,el:l,textEl:s,contentEl:a,style:i,textStyle:r,bem:ke}}});const Re=(0,a.Z)(Fe,[["render",Se]]);var De=Re;const[Xe,Ue]=de("group-element");var Ze=(0,o.aZ)({name:Xe,components:{Border:Ee,ImageElement:Me,TextElement:De,GroupElement:Ge},props:{width:{type:Number,default:0},height:{type:Number,default:0},x:{type:Number,default:0},y:{type:Number,default:0},zIndex:{type:Number,default:null},angle:{type:Number,default:0},hover:{type:Boolean,default:!1},focus:{type:Boolean,default:!1},operable:{type:Boolean,default:!0},children:{type:Array,default:()=>[]}},setup(e){const t=(0,o.Fl)((()=>e.hover||e.focus)),n=(0,o.Fl)((()=>e.focus&&e.operable)),A=(0,o.Fl)((()=>({width:e.width+"px",height:e.height+"px",transform:`translate(${e.x}px, ${e.y}px) rotateZ(${e.angle}deg)`,zIndex:e.zIndex})));return{visibleBox:t,visibleBoxScale:n,style:A,bem:Ue}}});const Te=(0,a.Z)(Ze,[["render",Qe]]);var Ge=Te;const[He,We]=de("scene");var Ne=(0,o.aZ)({name:He,components:{ImageElementComponent:Me,GroupElementComponent:Ge,TextElementComponent:De},props:["elements","handleTextElementMounted","handleMousedownScaleXY","handleMousedownScaleX","handleMousedownScaleY","handleMousedownContent","handleMousedownRotate","handleDbClickContent","handleChangeText","handleClickContent","handleClickTextElementContent","handleMousedown","handleMouseenterContent","handleMouseleaveContent"],setup(){return{bem:We}}});const je=(0,a.Z)(Ne,[["render",re]]);var Pe=je;function Oe(){const e=(0,G.qj)([]),t=(0,G.iH)(null),n=new J;let l,a,s=null,i=null,r=!1,u=null,c=null,d=null,g=null,h=null;function m(t){const n=(0,o.Wm)(Pe,{elements:e,handleTextElementMounted:S,handleMousedownScaleXY:v,handleMousedownScaleX:C,handleMousedownScaleY:b,handleMousedownContent:M,handleMousedownRotate:Q,handleDbClickContent:R,handleChangeText:D,handleClickContent:E,handleClickTextElementContent:x,handleMousedown:Y,handleMouseenterContent:k,handleMouseleaveContent:F});(0,A.sY)(n,t),l=new z({width:t.offsetWidth,height:t.offsetHeight,$parent:t}),a=new V({width:t.offsetWidth,height:t.offsetHeight,$parent:t}),p(t),y(t),B(t),w()}function f(t){e.push(t)}function w(){e.push(new W({imgSrc:"data:image/jpeg;base64,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",width:100,height:100,x:0,y:0}),new W({imgSrc:"https://st-gdx.dancf.com/gaodingx/4323/configs/system/20210728-095726-adc9.svg",width:50,height:100,x:100,y:100}),new N({text:"1是文字，，，a￥！%%……￥aaa hello aa的的",width:200,height:100,x:100,y:200}))}function p(n){n.addEventListener("mousedown",(A=>{r=!0,s||(t.value=null);const o={x:A.clientX-n.offsetLeft,y:A.clientY-n.offsetTop};for(let t=0;t<e.length;t++){const n=e[t];if(i&&i!==s&&(i.endEdit(),i=null),n!==s&&(n.blur(),"group"===n.elementType&&n.state.temporary)){for(let t=0;t<n.state.children.length;t++){const A=n.state.children[t];A.setPosition(A.state.x+n.state.x,A.state.y+n.state.y),A.operable(),e.push(A)}e.splice(t,1),t--}}a.ready({originX:o.x,originY:o.y})}))}function y(t){let A=0,o=0;document.addEventListener("mousemove",(s=>{const i={movementX:s.clientX-A,movementY:s.clientY-o,x:s.clientX-t.offsetLeft,y:s.clientY-t.offsetTop,target:s.target};A=s.clientX,o=s.clientY,r&&(c?ne(c,i):d?_(d,i):g?$(g,i):h?oe(h,i):u?(u.unHover(),u.blur(),n.handleDragElementTransform({element:u,mouse:i,onTransform(){const{x:t,y:n,xType:A,yType:o}=l.update({originElement:u,targetElements:e});return{x:t,y:n,xType:A,yType:o}}})):a.update({x:i.x,y:i.y,targetElements:e}))}))}function B(A){A.addEventListener("mouseup",(()=>{r=!1,s=null,u=null,c=null,d=null,g=null,h=null,n.clear(),a.clear(),l.clear();const A=a.getCollectElements();if(A&&A.length){const{x:n,y:o,width:l,height:a}=le(A),s=new se({x:n,y:o,width:l,height:a,children:A});for(let t=0;t<A.length;t++){const l=A[t];for(let t=0;t<e.length;t++){const A=e[t];A===l&&(A.setPosition(A.state.x-n,A.state.y-o),A.unHover(),A.inoperable(),A.blur(),e.splice(t,1),t--)}}s.temporary(),s.focus(),e.push(s),t.value=s}}))}function E(e){e.focus()}function x(e){e.state.focus&&!e.state.edit?(i=e,e.startEdit(),(0,o.Y3)((()=>{e.target.textEl.focus();const t=document.createRange();t.selectNodeContents(e.target.textEl),window.getSelection().removeAllRanges(),window.getSelection().addRange(t)}))):E(e)}function v(e){Y(e),c=e}function C(e){Y(e),d=e}function b(e){Y(e),g=e}function M(e){Y(e),u=e}function Q(e){Y(e),h=e}function Y(e){I(e),s=e,t.value=e}function S(e,t){e.setTarget(t),e.updateSize()}function I(t){for(let n=0;n<e.length;n++)t===e[n]?t.setZIndex(1):e[n].setZIndex(null)}function k(e){e.hover()}function F(e){e.unHover()}async function R(e){const{width:t,height:n,src:A}=await ae();e.setWidth(t),e.setHeight(n),e.setImgSrc(A)}function D(e,t){t.setText(e),t.updateHeight()}return{elements:e,editElement:t,mounted:m,add:f}}var ze={name:"home-view",components:{ImageBar:M,TextBar:F,GroupBar:T},setup(){const e=(0,G.iH)(null),t=Oe();function n(e){"image"===e?t.add(new W({imgSrc:"https://st-gdx.dancf.com/gaodingx/4323/configs/system/20210728-095726-adc9.svg",width:100,height:100,x:0,y:0})):"text"===e&&t.add(new N({text:"输入一段文字",width:200,height:100,x:100,y:200}))}function A(){for(let e=0;e<t.elements.length;e++){const n=t.elements[e];n.blur()}(0,o.Y3)((()=>{j(e.value)}))}return(0,o.bv)((()=>{t.mounted(e.value)})),{parent:e,editElement:t.editElement,handleAddElement:n,handleDownload:A}}};const Ke=(0,a.Z)(ze,[["render",B]]);var Ve=Ke;const qe=[{path:"/",name:"home",component:Ve}],Le=(0,u.p7)({history:(0,u.r5)(""),routes:qe});var Je=Le,_e=n(65),$e=(0,_e.MT)({state:{},getters:{},mutations:{},actions:{},modules:{}});n(2467);(0,A.ri)(r).use($e).use(Je).mount("#app")}},t={};function n(A){var o=t[A];if(void 0!==o)return o.exports;var l=t[A]={exports:{}};return e[A](l,l.exports,n),l.exports}n.m=e,function(){var e=[];n.O=function(t,A,o,l){if(!A){var a=1/0;for(u=0;u<e.length;u++){A=e[u][0],o=e[u][1],l=e[u][2];for(var s=!0,i=0;i<A.length;i++)(!1&l||a>=l)&&Object.keys(n.O).every((function(e){return n.O[e](A[i])}))?A.splice(i--,1):(s=!1,l<a&&(a=l));if(s){e.splice(u--,1);var r=o();void 0!==r&&(t=r)}}return t}l=l||0;for(var u=e.length;u>0&&e[u-1][2]>l;u--)e[u]=e[u-1];e[u]=[A,o,l]}}(),function(){n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,{a:t}),t}}(),function(){n.d=function(e,t){for(var A in t)n.o(t,A)&&!n.o(e,A)&&Object.defineProperty(e,A,{enumerable:!0,get:t[A]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={143:0};n.O.j=function(t){return 0===e[t]};var t=function(t,A){var o,l,a=A[0],s=A[1],i=A[2],r=0;if(a.some((function(t){return 0!==e[t]}))){for(o in s)n.o(s,o)&&(n.m[o]=s[o]);if(i)var u=i(n)}for(t&&t(A);r<a.length;r++)l=a[r],n.o(e,l)&&e[l]&&e[l][0](),e[l]=0;return n.O(u)},A=self["webpackChunkeditor"]=self["webpackChunkeditor"]||[];A.forEach(t.bind(null,0)),A.push=t.bind(null,A.push.bind(A))}();var A=n.O(void 0,[998],(function(){return n(4128)}));A=n.O(A)})();
//# sourceMappingURL=app.76d5ad0f.js.map